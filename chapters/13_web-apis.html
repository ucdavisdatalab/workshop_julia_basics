

<!DOCTYPE html>


<html lang="en-us" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>18. Surfing the Web &#8212; Julia Basics</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'chapters/13_web-apis';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="19. Loops" href="14_more-iteration.html" />
    <link rel="prev" title="17. Appendix" href="12_more-data-structures.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en-us"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/datalab-logo-full-color-rgb-1.png" class="logo__image only-light" alt="Julia Basics - Home"/>
    <script>document.write(`<img src="../_static/datalab-logo-full-color-rgb-1.png" class="logo__image only-dark" alt="Julia Basics - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="index.html">
                    Overview
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Julia Basics</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="21_syntax-features.html">1. Syntax and Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="23_types.html">2. Data Types and Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="22_reading-files.html">3. Reading and Writing Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="24_data-frames.html">4. Data Frames</a></li>
<li class="toctree-l1"><a class="reference internal" href="25_data-viz.html">5. Data Visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="26_case-studies.html">6. Case Studies</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Backmatter</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="15_test.html">Test</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Python Basics (old material)</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="01_julia-basics.html">7. Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="02_packages.html">8. Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="03_file-systems.html">9. File Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="05_data-types-structures.html">10. Data Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="06_indexing.html">11. Indexing in Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="07_special-values.html">12. Special Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="08_iteration-aggregation.html">13. Exploring Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="09_visualization.html">14. Data Visualization in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="10_if-statements.html">15. Organizing Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="11_functions.html">16. Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="12_more-data-structures.html">17. Appendix</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">18. Surfing the Web</a></li>
<li class="toctree-l1"><a class="reference internal" href="14_more-iteration.html">19. Loops</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/ucdavisdatalab/workshop_julia_basics" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/ucdavisdatalab/workshop_julia_basics/issues/new?title=Issue%20on%20page%20%2Fchapters/13_web-apis.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/chapters/13_web-apis.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Surfing the Web</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-requests-package">18.1. The requests Package</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">18.2. Request Etiquette</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#web-apis">18.3. Web APIs</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#javascript-object-notation">18.4. JavaScript Object Notation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#using-endpoints">18.5. Using Endpoints</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <!--
---
jupytext:
  formats: md:myst
  text_representation:
    extension: .md
    format_name: myst
kernelspec:
  display_name: Julia
  language: julia
  name: julia-1.10
---
-->
<section class="tex2jax_ignore mathjax_ignore" id="surfing-the-web">
<h1><span class="section-number">18. </span>Surfing the Web<a class="headerlink" href="#surfing-the-web" title="Permalink to this heading">#</a></h1>
<p>The <strong>hypertext transfer protocol</strong> (HTTP) is a set of rules for communication
between computers on a network. HTTP has a request-response model:</p>
<ol class="arabic simple">
<li><p>The <strong>client</strong> sends a <strong>request</strong> to a <strong>server</strong>. For example, the client
might request a file.</p></li>
<li><p>The server sends a <strong>response</strong> to the request.</p></li>
</ol>
<p>Your web browser goes through this process every time you visit a website. HTTP
requests are also one way to download data sets from the web.</p>
<p>There are several different HTTP request methods:</p>
<ul class="simple">
<li><p><strong>GET</strong> requests data from the server.</p>
<ul>
<li><p>Example: Visiting a web site</p></li>
<li><p>You can send a small amount of data with a GET request through the URL</p></li>
</ul>
</li>
<li><p><strong>POST</strong> sends data to the server.</p>
<ul>
<li><p>Example: Submitting a web form</p></li>
<li><p>The response to a POST request often contains data too</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods">And many more…</a></p></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you browse the web with Chrome or Firefox, you can inspect the HTTP requests
your brower makes when you visit a website. Go to a website and press
<code class="docutils literal notranslate"><span class="pre">Ctrl-Shift-i</span></code> (OS X: <code class="docutils literal notranslate"><span class="pre">Cmd-Shift-i</span></code>) to open your browser’s web developer
tools. Click on the “Network” tab and reload the website. You should see the
tab populate with all of the requests your browser makes as it loads the
website.</p>
</div>
<p>After you make an HTTP request, the server will send a response. Every HTTP
response includes a 3-digit status code to summarize the meaning of the
response:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Range</p></th>
<th class="head"><p>Meaning</p></th>
<th class="head"><p>Name</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>100s (100 - 199)</p></td>
<td><p>Request received, still processing</p></td>
<td><p>Informational</p></td>
</tr>
<tr class="row-odd"><td><p>200s</p></td>
<td><p>Success</p></td>
<td><p>Success</p></td>
</tr>
<tr class="row-even"><td><p>300s</p></td>
<td><p>The requested data is somewhere else</p></td>
<td><p>Redirect</p></td>
</tr>
<tr class="row-odd"><td><p>400s</p></td>
<td><p>Something’s wrong with the request</p></td>
<td><p>Client Error</p></td>
</tr>
<tr class="row-even"><td><p>500s</p></td>
<td><p>Something’s wrong with the server</p></td>
<td><p>Server Error</p></td>
</tr>
</tbody>
</table>
<p>You can find a list of common status codes in <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status">Mozilla’s developer
documentation</a>.</p>
<p>A response usually also contains <strong>content</strong> as text or raw bytes. Some common
formats for the content are:</p>
<ul class="simple">
<li><p>Hypertext Markup Language (HTML)</p></li>
<li><p>Extensible Markup Language (XML)</p></li>
<li><p>JavaScript Object Notation (JSON)</p></li>
</ul>
<section id="the-requests-package">
<h2><span class="section-number">18.1. </span>The requests Package<a class="headerlink" href="#the-requests-package" title="Permalink to this heading">#</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">:</span><span class="n">tags</span><span class="p">:</span> <span class="p">[</span><span class="n">remove</span><span class="o">-</span><span class="n">cell</span><span class="p">]</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">requests_cache</span>

<span class="n">requests_cache</span><span class="o">.</span><span class="n">install_cache</span><span class="p">(</span><span class="s2">&quot;day4_http_cache&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The <strong>requests</strong> package provides functions for making HTTP requests from
Python. You can use requests to make a GET request with the <code class="docutils literal notranslate"><span class="pre">get</span></code> function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://datalab.ucdavis.edu&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The status code of the response is in the <code class="docutils literal notranslate"><span class="pre">.status_code</span></code> attribute:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
</pre></div>
</div>
<p>If you want Python to raise an error any time the status code indicates a
problem, you can use the <code class="docutils literal notranslate"><span class="pre">.raise_for_status</span></code> method. It doesn’t do anything if
the status code is okay:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
</pre></div>
</div>
<p>The content of the response is stored as bytes in the <code class="docutils literal notranslate"><span class="pre">.contents</span></code> attribute and
as text in the <code class="docutils literal notranslate"><span class="pre">.text</span></code> attribute. Choose which one to use based on what kind of
site or file you requested. Web pages (<code class="docutils literal notranslate"><span class="pre">.html</span></code>) are usually text files, so for
the DataLab site it makes more sense to use <code class="docutils literal notranslate"><span class="pre">.text</span></code> to access the content:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">text</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span>

<span class="c1"># Only display the first 200 characters</span>
<span class="nb">print</span><span class="p">(</span><span class="n">text</span><span class="p">[:</span><span class="mi">200</span><span class="p">])</span>
</pre></div>
</div>
</section>
<section id="id1">
<h2><span class="section-number">18.2. </span>Request Etiquette<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h2>
<p>Making an HTTP request is not free. It has a real cost in CPU time and
electricity. Server administrators will not appreciate it if you make too many
requests or make requests too quickly. So:</p>
<ul class="simple">
<li><p>Use the <code class="docutils literal notranslate"><span class="pre">time.sleep</span></code> function to slow down any requests you make in a loop
(<a class="reference internal" href="14_more-iteration.html#loops"><span class="std std-numref">Section 19</span></a> explains loops). Aim for no more than 20-30 requests per
second.</p></li>
<li><p>Install and use the <strong>requests_cache</strong> package to avoid downloading extra
data when you make the same request twice.</p></li>
</ul>
<p>Failing to be polite can get you banned from websites!</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># In a Terminal (not Python console!):</span>
<span class="c1">#   conda install -c conda-forge requests-cache</span>
<span class="c1">#</span>

<span class="kn">import</span> <span class="nn">requests_cache</span>

<span class="n">requests_cache</span><span class="o">.</span><span class="n">install_cache</span><span class="p">(</span><span class="s2">&quot;my_cache&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="web-apis">
<h2><span class="section-number">18.3. </span>Web APIs<a class="headerlink" href="#web-apis" title="Permalink to this heading">#</a></h2>
<p>An <strong>application programming interface</strong> (API) is a collection of functions and
data structures for communicating with other software. For instance, whenever
you use a Python package, you’re using the API created by the package’s
developers.</p>
<p>Websites sometimes provide a <em>web</em> API so that programmers can create
applications that access data and settings. The most common kind of web API is
<strong>representational state transfer</strong> (REST). The key ideas of REST are that:</p>
<ul class="simple">
<li><p>You can “call” functions by making HTTP requests.</p></li>
<li><p>URLs called <strong>endpoints</strong> serve as function names.</p></li>
<li><p>Separate function calls are handled independently of each other. The server
doesn’t remember previous calls.</p></li>
</ul>
<p>For example, the <a class="reference external" href="https://swapi.dev/">Star Wars API</a> (SWAPI) is a REST API with
endpoints that return data about the Star Wars universe. The best way to learn
how to use a web API is to read its documentation, and fortunately the Star
Wars API is <a class="reference external" href="https://swapi.dev/documentation">well-documented</a>.</p>
<p>Try making a request to SWAPI’s “people” endpoint (the endpoint URL comes from
the SWAPI documentation):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://swapi.dev/api/people/1/&quot;</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</pre></div>
</div>
<p>Don’t forget to check the status of the response:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
</pre></div>
</div>
<p>A 200 status code means the request was successful, so the next step is to take
a look at the content of the response.</p>
<p>Unless you’ve already read through the SWAPI documentation, you probably don’t
know whether the content will be bytes or text. When you’re unsure, you can try
printing the <code class="docutils literal notranslate"><span class="pre">.text</span></code> value to check whether the content looks like text. Byte
content will usually look like gibberish if you try to display it as text.
Here’s the content of the response:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">response</span><span class="o">.</span><span class="n">text</span>
</pre></div>
</div>
<p>This is text about Luke Skywalker. In fact, according to the SWAPI
documentation, all of the SWAPI endpoints return text.</p>
<p>Although the response content is text, it isn’t ordinary English text. It’s
full of curly braces, square brackets, quotes, and other punctuation. If you
think back to the beginning (<a class="reference internal" href="12_more-data-structures.html#containers"><span class="std std-numref">Section 17.1</span></a>) of this chapter, the way the
punctuation is arranged might start to look familiar…</p>
</section>
<section id="javascript-object-notation">
<h2><span class="section-number">18.4. </span>JavaScript Object Notation<a class="headerlink" href="#javascript-object-notation" title="Permalink to this heading">#</a></h2>
<p>The response content looks a lot like Python lists and dictionaries! The
response is not actually Python code, but it <em>is</em> JavaScript code. In
JavaScript, lists and dictionaries are written the same way as in Python. The
response is in a popular non-tabular data format called <strong>JavaScript Object
Notation</strong> (JSON).</p>
<p>JavaScript Object Notation (JSON) looks and works a lot like Python lists and
dictionaries. Lists are surrounded with <code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">]</span></code>, and dictionaries are surrounded
with <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">}</span></code>. There are many Python packages for converting JSON text into Python
lists and dictionaries.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can use Python’s built-in <a class="reference external" href="https://docs.python.org/3/library/json.html">json</a> module to read a JSON file you didn’t
get from an HTTP request. For example, Jupyter notebooks (<code class="docutils literal notranslate"><span class="pre">.ipynb</span></code> files) are
in JSON format.</p>
</div>
<p>When you know the content of a response is in JSON format, you can use the
<code class="docutils literal notranslate"><span class="pre">.json</span></code> method on the response to convert it into Python lists and
dictionaries:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">luke</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="n">luke</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">luke</span><span class="p">)</span>
</pre></div>
</div>
<p>In this case, the outer object is a dictionary. The keys in the dictionary are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="n">luke</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</pre></div>
</div>
<p>These keys describe the included information about Luke. For example, to get
his eye color, you can use indexing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">luke</span><span class="p">[</span><span class="s2">&quot;eye_color&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>Sometimes data in JSON format will contain several layers of dictionaries and
lists. Remember that you can use indexing with square brackets <code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">]</span></code> to
navigate these.</p>
</section>
<section id="using-endpoints">
<h2><span class="section-number">18.5. </span>Using Endpoints<a class="headerlink" href="#using-endpoints" title="Permalink to this heading">#</a></h2>
<p>The SWAPI endpoint <code class="docutils literal notranslate"><span class="pre">/people/</span></code> returns information in JSON format about
different people in the Star Wars universe. An ID number after <code class="docutils literal notranslate"><span class="pre">/people/</span></code>
determines the person for which the endpoint returns information. Think of the
ID number as an argument to the endpoint. For instance, Luke Skywalker’s ID
number is <code class="docutils literal notranslate"><span class="pre">1</span></code>, so the URL for information about Luke is:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>https://swapi.dev/api/people/1/
</pre></div>
</div>
<p>A good way to work with an endpoint that accepts arguments is to use Python to
paste the arguments onto the end. For example, this code pastes the number <code class="docutils literal notranslate"><span class="pre">2</span></code>
onto the end of the string <code class="docutils literal notranslate"><span class="pre">endpoint</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">endpoint</span> <span class="o">=</span> <span class="s2">&quot;https://swapi.dev/api/people/&quot;</span>
<span class="n">endpoint</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">str</span></code> function converts the ID number into a string, and <code class="docutils literal notranslate"><span class="pre">+</span></code> pastes the two
strings together.</p>
<p>Now try getting the information for the person with ID number <code class="docutils literal notranslate"><span class="pre">2</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">endpoint</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>

<span class="c1"># Raise an error if the request failed</span>
<span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>

<span class="n">person</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="n">person</span>
</pre></div>
</div>
<p>So the “person” with ID number <code class="docutils literal notranslate"><span class="pre">2</span></code> is actually the android C3-PO.</p>
<p>You can make using the endpoint more convenient by writing a Python function
that takes an ID number as input, makes a request to the endpoint, and then
returns the result. Here’s the code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_swapi_person</span><span class="p">(</span><span class="n">id_num</span><span class="p">):</span>
    <span class="n">endpoint</span> <span class="o">=</span> <span class="s2">&quot;https://swapi.dev/api/people/&quot;</span>

    <span class="c1"># Note that &#39;id_num&#39; replaces &#39;2&#39;</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">endpoint</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_num</span><span class="p">))</span>

    <span class="c1"># Raise an error if the request failed</span>
    <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>
</div>
<p>As always, when you write a function, it’s important to test it out. For
example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">get_swapi_person</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
</pre></div>
</div>
<p>When you’re working with a web API, it’s generally a good idea to create
<strong>wrapper functions</strong>, like <code class="docutils literal notranslate"><span class="pre">get_swapi_person</span></code>, that turn each endpoint into an
actual Python function by wrapping up (or encapsulating) the requests code.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./chapters"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="12_more-data-structures.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">17. </span>Appendix</p>
      </div>
    </a>
    <a class="right-next"
       href="14_more-iteration.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">19. </span>Loops</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-requests-package">18.1. The requests Package</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">18.2. Request Etiquette</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#web-apis">18.3. Web APIs</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#javascript-object-notation">18.4. JavaScript Object Notation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#using-endpoints">18.5. Using Endpoints</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Derek Devnich, Ezra Morrison, Carl Stahmer, Nick Ulle
</p>

  </div>
  
  <div class="footer-item">
    

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
  <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">
  <img alt="CC BY-SA 4.0" src="https://img.shields.io/badge/License-CC%20BY--NC--SA%204.0-lightgrey.svg"> 
</a>

</div>
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>